/*! ocapi_js_app_experimental 2013-09-05 */
function DWAPIResource(){}function DWShopAccount(){DWAPIResource.call(this)}function DWShopBasket(){DWAPIResource.call(this)}function DWShopCategory(){DWAPIResource.call(this)}function DWShopContent(){DWAPIResource.call(this)}function DWShopProduct(){DWAPIResource.call(this)}function DWShopProductSearch(){DWAPIResource.call(this)}function DWShopStore(){DWAPIResource.call(this)}var scheme="http://",secureScheme="https://",host="wliu.vbox.demandware.net",baseURL=secureScheme+host+"/s/DevCenterTest/dw/shop/v13_4/",secureBaseURL=secureScheme+host+"/s/DevCenterTest/dw/shop/v13_4/",clientId="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";DWAPIResource.prototype.errorFunction=null,DWAPIResource.prototype.registerErrorHandler=function(a){this.errorFunction=a},DWAPIResource.prototype.resourceUrl=function(){return null},DWAPIResource.prototype.resourceUrlWithId=function(a){return this.resourceUrl()+"/"+a},DWAPIResource.prototype.resourceUrlWithAction=function(a){return this.resourceUrl()+"/"+a},DWAPIResource.prototype.retrieveResource=function(a){return this.findWithUrl(baseURL+this.resourceUrl(),a)},DWAPIResource.prototype.findById=function(a,b){return this.findWithUrl(baseURL+this.resourceUrlWithId(a),b)},DWAPIResource.prototype.findWithUrl=function(a,b){return $.ajax({type:"GET",headers:{"x-dw-client-id":clientId},url:a,dataType:"json",success:b,error:this.errorFunction})},DWShopAccount.prototype=new DWAPIResource,DWShopAccount.prototype.constructor=DWShopAccount,DWShopAccount.prototype.currentAccount=null,DWShopAccount.prototype.etag=null,DWShopAccount.prototype.resourceUrl=function(){return"account"},DWShopAccount.prototype.login=function(a,b,c){return $.ajax({type:"POST",contentType:"application/json",data:'{"username": "'+a+'", "password": "'+b+'"}',headers:{"x-dw-client-id":clientId},url:secureBaseURL+this.resourceUrlWithAction("login"),dataType:"json",success:c,error:this.errorFunction})},DWShopAccount.prototype.logout=function(a){return $.ajax({type:"POST",contentType:"application/json",headers:{"x-dw-client-id":clientId},url:secureBaseURL+this.resourceUrlWithAction("logout"),dataType:"json",success:a,error:this.errorFunction})},DWShopAccount.prototype.getProfile=function(a){return $.ajax({type:"GET",contentType:"application/json",headers:{"x-dw-client-id":clientId},url:secureBaseURL+this.resourceUrlWithAction("this"),dataType:"json",success:a,error:this.errorFunction})},DWShopAccount.prototype.updateProfile=function(a,b){return $.ajax({type:"PATCH",contentType:"application/json",headers:{"If-Match":this.etag,"x-dw-client-id":clientId},url:secureBaseURL+this.resourceUrlWithAction("this"),data:a,dataType:"json",success:b,error:this.errorFunction})},DWShopBasket.prototype=new DWAPIResource,DWShopBasket.prototype.constructor=DWShopBasket,DWShopBasket.prototype.currentBasket=null,DWShopBasket.prototype.etag=null,DWShopBasket.prototype.resourceUrl=function(){return"basket/this"},DWShopBasket.prototype.addToBasket=function(a,b,c){return $.ajax({type:"POST",contentType:"application/json",data:'{product_id: "'+a+'", quantity: '+b+"}",headers:{"x-dw-client-id":clientId},url:baseURL+this.resourceUrlWithAction("add"),dataType:"json",success:c,error:this.errorFunction})},DWShopBasket.prototype.removeFromBasket=function(a,b){for(var c=null,d=this.currentBasket.product_items,e=0;e<d.length;e++)if(d[e].product_id==a){c="{product_items:[{_delete_at:"+e+"}]}";break}return null!==c?this.sendUpdateToServer(c,b):void 0},DWShopBasket.prototype.updateQuantity=function(a,b,c){for(var d=null,e=this.currentBasket.product_items,f=0;f<e.length;f++)if(e[f].product_id==a){d="{product_items:[{_at:"+f+",quantity:"+b+"}]}";break}return null!==d?this.sendUpdateToServer(d,c):void 0},DWShopBasket.prototype.updateQuantities=function(a,b){for(var c="{product_items:[",d=this.currentBasket.product_items,e=0;e<a.length;e++){for(var f=0;f<d.length;f++)if(d[f].product_id==a[e].product_id){c+="{_at:"+f+",quantity:"+a[e].quantity+"}";break}e<a.length-1&&(c+=",")}return c+="]}",this.sendUpdateToServer(c,b)},DWShopBasket.prototype.sendUpdateToServer=function(a,b){return $.ajax({type:"PATCH",contentType:"application/json",data:a,headers:{"If-Match":this.etag,"x-dw-client-id":clientId},url:baseURL+this.resourceUrl(),dataType:"json",success:b,error:this.errorFunction})},DWShopBasket.prototype.getBasket=function(a){return this.retrieveResource(a)},DWShopCategory.prototype=new DWAPIResource,DWShopCategory.prototype.constructor=DWShopCategory,DWShopCategory.prototype.resourceUrl=function(){return"categories"},DWShopCategory.prototype.findById=function(a,b){return this.findWithUrl(baseURL+this.resourceUrlWithId(a)+"?levels=1",b)},DWShopContent.prototype=new DWAPIResource,DWShopContent.prototype.constructor=DWShopContent,DWShopContent.prototype.resourceUrl=function(){return"content"},DWShopProduct.prototype=new DWAPIResource,DWShopProduct.prototype.constructor=DWShopProduct,DWShopProduct.prototype.resourceUrl=function(){return"products"},DWShopProduct.prototype.findByIdWithExpand=function(a,b,c){var d=baseURL+this.resourceUrlWithId(a)+(null===b?"":"?expand="+b);return $.ajax({type:"GET",headers:{"x-dw-client-id":clientId},url:d,dataType:"json",success:c,error:this.errorFunction})},DWShopProduct.prototype.loadProductLink=function(a,b){return $.ajax({type:"GET",headers:{"x-dw-client-id":clientId},url:a+"?expand=images,variations",dataType:"json",success:b,error:this.errorFunction})},DWShopProductSearch.prototype=new DWAPIResource,DWShopProductSearch.prototype.constructor=DWShopProductSearch,DWShopProductSearch.prototype.resourceUrl=function(){return"product_search"},DWShopProductSearch.prototype.search=function(a,b){return $.ajax({type:"GET",headers:{"x-dw-client-id":clientId},url:baseURL+this.resourceUrl()+"?q="+a+"&expand=images",dataType:"json",success:b,error:this.errorFunction})},DWShopStore.prototype=new DWAPIResource,DWShopStore.prototype.constructor=DWShopStore,DWShopStore.prototype.resourceUrl=function(){return"stores"};